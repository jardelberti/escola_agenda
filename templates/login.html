{% extends "base.html" %}

{% block title %}Login - Agenda Escolar{% endblock %}

{% block content %}
<body class="bg-slate-50" style='font-family: Inter, "Noto Sans", sans-serif;'>
<div class="flex flex-col items-center justify-center px-4 py-12" style="min-height: 85vh;">
    <div class="w-full max-w-sm mx-auto">

        <!-- LOGO MAIOR E CLICÁVEL -->
        <a href="{{ url_for('landing_page') }}" class="flex justify-center mb-6">
            <img src="{{ url_for('static', filename='logo_agenda.png') }}" alt="Logo Agenda Escolar" class="h-48 w-auto">
        </a>

        <h1 class="text-2xl font-bold text-center text-slate-800 mb-2">Acesse sua Conta</h1>
        <p class="text-center text-slate-500 mb-6">Use suas credenciais para entrar no sistema.</p>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    {% if category == 'success' %}
                        {% set color = 'green' %}
                    {% elif category == 'danger' %}
                        {% set color = 'red' %}
                    {% else %}
                        {% set color = 'yellow' %}
                    {% endif %}
                    <div class="bg-{{ color }}-100 border border-{{ color }}-400 text-{{ color }}-700 px-4 py-3 rounded-lg relative mb-4" role="alert">
                        <span class="block sm:inline">{{ message }}</span>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- Formulário de E-mail e Senha -->
        <form method="POST" action="{{ url_for('login') }}" class="space-y-4">
            <div>
                <label for="email" class="sr-only">E-mail</label>
                <div class="relative">
                    <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"> mail </span>
                    <input type="email" id="email" name="email" class="form-input w-full rounded-lg text-slate-800 border border-slate-300 h-14 pl-12" placeholder="E-mail" required autofocus />
                </div>
            </div>
            <div>
                <label for="password" class="sr-only">Senha</label>
                <div class="relative">
                    <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"> lock </span>
                    <input type="password" id="password" name="password" class="form-input w-full rounded-lg text-slate-800 border border-slate-300 h-14 pl-12" placeholder="Senha" required />
                </div>
            </div>

            <!-- LINKS DE CRIAR CONTA E ESQUECEU A SENHA -->
            <div class="flex justify-between items-center text-sm">
                <a href="{{ url_for('register') }}" class="font-medium text-blue-600 hover:text-blue-500">Criar conta</a>
                <a href="{{ url_for('forgot_password') }}" class="font-medium text-blue-600 hover:text-blue-500">Esqueceu sua senha?</a>
            </div>

            <div class="pt-2">
                <button type="submit" class="flex w-full items-center justify-center rounded-lg h-14 bg-blue-600 text-white text-base font-bold hover:bg-blue-700 transition-colors duration-300">Entrar</button>
            </div>
        </form>

        <!-- Divisor "OU" -->
        <div class="flex items-center my-6"><div class="flex-grow border-t border-slate-300"></div><span class="mx-4 text-slate-500 text-sm">OU</span><div class="flex-grow border-t border-slate-300"></div></div>

        <!-- Botões de Login Social -->
        <div class="space-y-3">
            <a href="{{ url_for('login_google') }}" class="flex w-full items-center justify-center rounded-lg h-14 bg-white text-slate-800 border border-slate-300 shadow-sm hover:bg-slate-100 transition-colors duration-300">
                <svg class="h-5 w-5 mr-3" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4,12.955,4,4,12.955,4,24s8.955,20,20,20,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4,16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"></path><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C42.022,35.138,44,30.024,44,24,44,22.659,43.862,21.35,43.611,20.083z"></path></svg>
                <span>Entrar com Google</span>
            </a>
            <a href="{{ url_for('login_microsoft') }}" class="flex w-full items-center justify-center rounded-lg h-14 bg-white text-slate-800 border border-slate-300 shadow-sm hover:bg-slate-100 transition-colors duration-300">
                <svg class="h-5 w-5 mr-3" viewBox="0 0 21 21"><path fill="#f25022" d="M1 1h9v9H1z"></path><path fill="#00a4ef" d="M1 11h9v9H1z"></path><path fill="#7fba00" d="M11 1h9v9h-9z"></path><path fill="#ffb900" d="M11 11h9v9h-9z"></path></svg>
                <span>Entrar com Microsoft</span>
            </a>
        </div>

        <!-- TEXTO INFORMATIVO REFORMULADO -->
        <div class="mt-8 p-4 bg-slate-100 rounded-lg border border-slate-200 text-sm text-slate-600 space-y-4">
            <div class="flex items-start gap-3">
                <span class="material-symbols-outlined text-blue-600 mt-0.5">school</span>
                <div>
                    <strong class="text-slate-800">Administradores de Escola:</strong>
                    <p>Se você já tem uma conta, use uma das opções de login acima. Se for sua primeira vez, <a href="{{ url_for('register') }}" class="font-semibold text-blue-600 hover:underline">crie uma conta para sua escola</a>.</p>
                </div>
            </div>
            <div class="flex items-start gap-3">
                <span class="material-symbols-outlined text-blue-600 mt-0.5">person</span>
                <div>
                    <strong class="text-slate-800">Professores:</strong>
                    <p>O seu acesso deve ser criado pelo administrador da sua escola. Peça a ele que lhe envie um convite por e-mail.</p>
                </div>
            </div>
        </div>

    </div>
</div>
</body>
{% endblock %}

